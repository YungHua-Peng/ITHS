
//=======================================================
//  This code is generated by Terasic System Builder
//=======================================================

module DE10_NANO_RFS_SENSOR_RTL(

	//////////// CLOCK //////////
	input 		          		FPGA_CLK1_50,
	input 		          		FPGA_CLK2_50,
	input 		          		FPGA_CLK3_50,

	//////////// KEY //////////
	input 		     [1:0]		KEY,

	//////////// LED //////////
	output		     [7:0]		LED,

	//////////// SW //////////
	input 		     [3:0]		SW,

	//////////// GPIO_1, GPIO connect to RFS - RF and Sensor //////////
	inout 		          		BT_KEY,
	input 		          		BT_UART_RX,
	output		          		BT_UART_TX,
	input 		          		LSENSOR_INT,
	inout 		          		LSENSOR_SCL,
	inout 		          		LSENSOR_SDA,
	output		          		MPU_AD0_SDO,
	output		          		MPU_CS_n,
	output		          		MPU_FSYNC,
	input 		          		MPU_INT,
	inout 		          		MPU_SCL_SCLK,
	inout 		          		MPU_SDA_SDI,
	input 		          		RH_TEMP_DRDY_n,
	inout 		          		RH_TEMP_I2C_SCL,
	inout 		          		RH_TEMP_I2C_SDA,
	inout 		     [7:0]		TMD_D,
	input 		          		UART2USB_CTS,
	output		          		UART2USB_RTS,
	input 		          		UART2USB_RX,
	output		          		UART2USB_TX,
	output		          		WIFI_EN,
	output		          		WIFI_RST_n,
	input 		          		WIFI_UART0_CTS,
	output		          		WIFI_UART0_RTS,
	input 		          		WIFI_UART0_RX,
	output		          		WIFI_UART0_TX,
	input 		          		WIFI_UART1_RX
);




//=======================================================
//  REG/WIRE declarations
//======================================================
   wire       RESET_N ; 
   wire [7:0] BCD_T , BCD_H;  
   wire [7:0] POWERUP	 ; 
   
   wire [15:0] DATA0  ; 
   wire [15:0] DATA1  ; 
   wire        HM_TR ;
	wire [15:0] HM_XOUT;
	wire [15:0] HM_YOUT;
	wire [15:0] HM_ZOUT;	
 	wire [15:0] ACCEL_XOUT;
	wire [15:0] ACCEL_YOUT;
	wire [15:0] ACCEL_ZOUT;
	wire [15:0] TEMP_OUT;
	wire [15:0] GYRO_XOUT;
	wire [15:0] GYRO_YOUT;
	wire [15:0] GYRO_ZOUT;
	wire [7:0 ] INT_STATUS;  
//=======================================================
//  Structural coding
//=======================================================


//---- RESET ---
assign RESET_N =KEY[0];
//----Humidity -Temperature SENSOR ---	
HC1000 HC(
      .RESET_N        (RESET_N        ),
      .CLOCK_50       (FPGA_CLK1_50   ),
      .RH_TEMP_DRDY_n (RH_TEMP_DRDY_n ),
      .RH_TEMP_I2C_SCL(RH_TEMP_I2C_SCL), 
      .RH_TEMP_I2C_SDA(RH_TEMP_I2C_SDA),
      .BCD_T          (BCD_T), 
      .BCD_H          (BCD_H)
);		
	
//----LIGHT SENSOR ---	
APDS_9301 ctl( 
   //--SYSTEM--   
	.RESET_N  (RESET_N),
   .CLK_50   (FPGA_CLK1_50),
	//--IC SIDE-- 
	.RDY_n    (LSENSOR_INT),   
	.I2C_SCL  (LSENSOR_SCL),
	.I2C_SDA  (LSENSOR_SDA), 
	.DATA0    (DATA0 ),
	.DATA1    (DATA1 ),
   .POWERUP  (POWERUP) 
	);


//---- RESET ---
	
assign MPU_AD0_SDO =0;
assign MPU_CS_n    =1; 
assign MPU_FSYNC   =0; 
//----Humidity_Temperature ---	
MPU_9250  ctlPP( 
   //--SYSTEM-- 
	.RESET_N 	 ( RESET_N ),
   .CLK_50      ( FPGA_CLK1_50 ),
	//--IC SIDE--
	.RDY_n       ( MPU_INT),   
	.I2C_SCL     ( MPU_SCL_SCLK),
	.I2C_SDA     ( MPU_SDA_SDI ),
	.ACCEL_XOUT  (ACCEL_XOUT),
	.ACCEL_YOUT  (ACCEL_YOUT),
	.ACCEL_ZOUT  (ACCEL_ZOUT),
	.TEMP_OUT    (TEMP_OUT  ),
	.GYRO_XOUT   (GYRO_XOUT ),
	.GYRO_YOUT   (GYRO_YOUT ),
	.GYRO_ZOUT   (GYRO_ZOUT ),
	.INT_STATUS  (INT_STATUS ),
	.HM_XOUT     (HM_XOUT),
	.HM_YOUT     (HM_YOUT),
	.HM_ZOUT     (HM_ZOUT),
	.TR          (HM_TR) 	
	
	);


//----------------VIEW -------
//0  TEMPERATURE
//1  HUMITY-TEMP       
//2  Ambient LIGHT SENSOR ADC0 (DATA0)
//3  Ambient LIGHT SENSOR ADC1 (DATA1)
//4  THREE-AXIS MEMS ACCELEROMETER X
//5  THREE-AXIS MEMS ACCELEROMETER Y
//6  THREE-AXIS MEMS ACCELEROMETER Z
//7  THREE-AXIS MEMS GYROSCOPE     X
//8  THREE-AXIS MEMS GYROSCOPE     Y
//9  THREE-AXIS MEMS GYROSCOPE     Z
//10 THREE-AXIS MEMS MAGNETOMETER  X
//11 THREE-AXIS MEMS MAGNETOMETER  Y
//12 THREE-AXIS MEMS MAGNETOMETER  Z
//---------------------------------
//-----SENSOR_OUT ---- 
SENSOR_OUT SENSOR_OUT_i(
	.Temperature    ( BCD_T  ),
   .HUMITY         ( BCD_H  ),
	.Ambient_LIGHT0 ( DATA0  ),
	.Ambient_LIGHT1 ( DATA1  ),
 	.ACCELEROMETER_X( ACCEL_XOUT),
	.ACCELEROMETER_Y( ACCEL_YOUT),
	.ACCELEROMETER_Z( ACCEL_ZOUT),
	.GYROSCOPE_X    ( GYRO_XOUT ),
	.GYROSCOPE_Y    ( GYRO_YOUT ),
	.GYROSCOPE_Z    ( GYRO_ZOUT ),
	.MAGNETOMETER_X ( HM_XOUT   ),
	.MAGNETOMETER_Y ( HM_YOUT   ),
	.MAGNETOMETER_Z ( HM_ZOUT   ),	
	.RH_TEMP_DRDY_n ( RH_TEMP_DRDY_n),
	.HM_TR          ( HM_TR         )
); 

//--LED Dispaly 
assign LED[0]= RH_TEMP_DRDY_n;
assign LED[1]= HM_TR         ;


//---50MHZ TEST
CLOCKMEM CLOCKMEM_i(  .CLK(FPGA_CLK1_50) ,.CLK_FREQ(50_000_000), .CK_1HZ (LED[7] ) ) ;




endmodule


